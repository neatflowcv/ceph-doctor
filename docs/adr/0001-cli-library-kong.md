# ADR 0001: CLI 커맨드 파서 라이브러리 - Kong

날짜: 2026-02-23
상태: 채택

## 배경

현대적인 Go CLI 커맨드 파서 라이브러리가 필요하다. 요구사항:

- 서브커맨드와 플래그를 명확하게 지원할 것.
- 글로벌 변수 없이 사용할 수 있을 것.
- 유지보수성과 확장성이 좋고 사용성이 좋을 것.

## 결정

CLI 커맨드 파싱 라이브러리로 Kong을 사용한다.

## 근거

- 구조체 태그 기반 파싱으로 설정을 구조체에 캡슐화해 글로벌
  상태를 피할 수 있다.
- 서브커맨드와 검증 기능을 잘 지원하는 현대적인 API를 제공한다.
- `main()`에서 간단히 구성할 수 있으며 확장에도 유리하다.

## 대안

- Cobra: 생태계와 기능은 풍부하나 구조체 태그 기반 설계가
  아니며 기본 예제가 전역 변수를 전제로 하는 편이라 본 프로젝트
  목표와 거리가 있다.
- urfave/cli: 선언형으로 간결하지만 구조체 태그 기반의 강한
  검증/바인딩 모델은 상대적으로 약하다.
- go-flags: 가볍고 단순하지만 서브커맨드/확장성 측면에서 Kong
  대비 유연성이 떨어진다.
- pflag: 플래그 파싱에는 적합하나 서브커맨드 중심의 CLI 구조에는
  한계가 있다.

## 결과

- CLI 입력을 구조체로 모델링하고 Kong으로 파싱한다.
- CLI 구성은 `main()` 또는 전용 패키지에서 글로벌 변수 없이
  구성한다.
- 라이브러리 변경 시 구조체 태그와 연결 코드를 수정해야 한다.
